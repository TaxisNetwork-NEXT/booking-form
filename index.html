
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>London Taxi Booking Widget</title>
    <style>
        :root{--primary-color:#A64D79;--hover-color:#8e3f66}
        body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;margin:0;padding:20px;background:#1a1a1a;color:#333}
        .form-container{max-width:550px;width:90%;margin:20px auto;padding:16px;background:#fff;border-radius:12px;box-shadow:0 8px 32px rgba(0,0,0,.3);position:relative;overflow:hidden}
        .form-title{font-size:32px;font-weight:600;text-align:center;margin:10px 0;color:#333;text-transform:uppercase;letter-spacing:1px}
        .download-icons{display:flex;gap:10px;justify-content:center;margin-bottom:
10px;align-items:center}
        .download-icons img{width:46px;height:46px;filter:drop-shadow(3px 3px 10px #666);cursor:pointer}
        .divider{width:1px;height:40px;background:#555}
        .form-field{display:flex;flex-direction:column;margin-bottom:10px}
        .field-label{font-size:14px;font-weight:500;margin-bottom:4px;color:#333;text-transform:uppercase;display:flex;align-items:center}
        .field-label img{width:10px;height:10px;margin-left:8px;cursor:pointer;padding:3px;border-radius:4px;background:var(--primary-color)}
        .field-label img.disabled{opacity:0.5;cursor:not-allowed}
        .field-container{position:relative;display:flex;align-items:center}
        .custom-input,.custom-select,.custom-datetime,.wait-time-input{width:100%;padding:8px;border:1px solid #ccc;border-radius:8px;font-size:14px;background:#f5f5f5;color:#333;transition:all .2s;box-sizing:border-box}
        .custom-input:focus,.custom-select:focus,.custom-datetime:focus,.wait-time-input:focus{border-color:var(--primary-color);box-shadow:0 0 0 3px rgba(166,77,121,.2);outline:0}
        .two-column{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:12px}
        .field-mini{display:flex;gap:6px;align-items:center}
        .wait-time-input{max-width:80px}
        .wait-time-input:disabled{background:#e0e0e0;cursor:not-allowed}
        .toggle-switch{position:relative;display:inline-block;width:40px;height:20px;flex-shrink:0}
        .toggle-switch input{opacity:0;width:0;height:0}
        .slider{position:absolute;cursor:pointer;inset:0;background:#ccc;transition:.3s;border-radius:20px}
        .slider:before{position:absolute;content:"";height:16px;width:16px;left:2px;bottom:2px;background:#fff;transition:.3s;border-radius:50%}
        input:checked+.slider{background:var(--primary-color)}
        input:checked+.slider:before{transform:translateX(20px)}
        .icon-btn{background:var(--primary-color);border:none;padding:6px;border-radius:8px;cursor:pointer;margin-left:8px;transition:.2s;flex-shrink:0}
        .icon-btn:hover{background:var(--hover-color)}
        .icon-btn img{width:20px;height:20px}
        .submit-btn{background:var(--primary-color);color:#fff;padding:12px;border:none;border-radius:8px;font-size:16px;font-weight:500;cursor:pointer;width:100%;margin-top:15px;transition:.2s}
        .submit-btn:hover{background:var(--hover-color);transform:translateY(-2px)}
        .modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.7);justify-content:center;align-items:center;z-index:1000}
        .modal.show{display:flex}
        .modal-content{background:#fff;padding:20px;border-radius:12px;max-width:500px;width:90%;max-height:90vh;overflow-y:auto;box-shadow:0 8px 32px rgba(0,0,0,.4)}
        .modal-header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #ddd;padding-bottom:10px;margin-bottom:10px}
        .modal-title{font-size:24px;font-weight:600;text-transform:uppercase}
        .close-btn,.airport-btn,.custom-btn,.luggage-item{background:var(--primary-color);color:#fff;border:none;padding:10px;margin:4px;border-radius:8px;cursor:pointer}
        .close-btn{width:auto;padding:8px 12px}
        .airport-btn,.custom-btn{width:100%;text-align:left}
        .airport-btn:hover,.custom-btn:hover{background:var(--hover-color)}
        .suggestion-list{position:absolute;top:100%;left:0;width:calc(100% - 40px);background:#f5f5f5;border:1px solid #ccc;border-radius:8px;max-height:150px;overflow-y:auto;z-index:10;display:none;box-shadow:0 4px 12px rgba(0,0,0,.3)}
        .suggestion-item{padding:8px;cursor:pointer}
        .suggestion-item:hover{background:var(--primary-color);color:#fff}
        .loading-div{display:none;position:fixed;inset:0;background:rgba(0,0,0,.7);justify-content:center;align-items:center;z-index:2000}
        .loader{border:6px solid #f0f0f0;border-top:6px solid var(--primary-color);border-radius:50%;width:50px;height:50px;animation:spin 1s linear infinite}
        @keyframes spin{to{transform:rotate(360deg)}}
        .error-message{color:#b00;font-size:12px;margin-top:4px;display:none}
        .via-field{position:relative}
        .remove-field{background:var(--primary-color);color:#fff;border:none;padding:6px 10px;border-radius:8px;cursor:pointer}
        .items-side-menu{position:absolute;top:0;right:0;width:280px;background:#fff;border-radius:12px 0 0 12px;box-shadow:-4px 0 16px rgba(0,0,0,.3);transform:translateX(100%);transition:.3s;z-index:100;display:none;flex-direction:column;padding:16px}
        .items-side-menu.show{transform:translateX(0);display:flex}
        .items-side-menu-item{display:flex;justify-content:space-between;align-items:center;padding:8px;background:#f8f8f8;border-radius:8px;margin-bottom:8px}
        .delete-btn img{width:16px;height:16px;background:#666;padding:4px;border-radius:4px}
        @media(max-width:768px){.two-column{grid-template-columns:1fr}.items-side-menu{width:70%;border-radius:0}}
    </style>
</head>
<body>

<!-- ONE-LINE EMBED (this is what you paste on ALL your 250+ sites) -->
<div class="london-taxi-widget"
     data-office-code="LNT"
     data-website-name="Cheap Airport Transfers London"
     data-website-url="https://cheapairporttransferslondon.com/"
     data-phone="02037405467"
     data-api-base="https://booking.londontaxis247.co.uk"
     data-color-code="A64D79">
</div>

<script>
(() => {
    const widgets = document.querySelectorAll('.london-taxi-widget');
    if (!widgets.length) return;

    widgets.forEach(widget => {
        const officeCode = widget.dataset.officeCode || "LNT";
        const websiteName = widget.dataset.websiteName || "Cheap Airport Transfers London";
        const websiteUrl = widget.dataset.websiteUrl || "https://cheapairporttransferslondon.com/";
        const phone = widget.dataset.phone || "02037405467";
        const apiBase = widget.dataset.apiBase || "https://booking.londontaxis247.co.uk";
        const color = widget.dataset.colorCode || "A64D79";

        const OFFICE_DETAILS = `${officeCode},${websiteName},${websiteUrl},${phone}`;
        const API_BASE = apiBase;
        const COLOR_CODE = color;

        widget.style.setProperty('--primary-color', `#${color}`);
        widget.style.setProperty('--hover-color', `#${(parseInt(color,16)*0.85|0).toString(16).padStart(6,"0")}`);

        widget.innerHTML = `
<div class="form-container">
    <h3 class="form-title">London Airport Minicab</h3>
    <div class="download-icons">
        <img src="https://taxisnetwork-next.github.io/booking-form/assets/images/googleplay.png" alt="Google Play">
        <div class="divider"></div>
        <img src="https://taxisnetwork-next.github.io/booking-form/assets/images/applestore.png" alt="App Store">
        <div class="divider"></div>
        <img src="https://taxisnetwork-next.github.io/booking-form/assets/images/call.png" alt="Call">
    </div>
    <p style="text-align:center;">OR</p>

    <div class="form-field">
        <label class="field-label">Pick Up</label>
        <div class="field-container">
            <input id="pickup" class="custom-input" placeholder="Select pickup address" autocomplete="off" required>
            <div id="pickup-suggestions" class="suggestion-list"></div>
            <button class="icon-btn" onclick="openModal('airportListModal1')"><img src="https://taxisnetwork-next.github.io/booking-form/assets/images/aeroplane.png"></button>
        </div>
        <span class="error-message" id="pickup-error">Please select a valid pickup address.</span>
    </div>

    <div class="form-field" id="via-section">
        <label class="field-label">Via <img id="via-plus" src="https://taxisnetwork-next.github.io/booking-form/assets/images/plus1.webp" onclick="addViaField()" class="disabled"></label>
        <div id="via-list"></div>
    </div>

    <div class="form-field">
        <label class="field-label">Destination</label>
        <div class="field-container">
            <input id="dropof" class="custom-input" placeholder="Select dropoff address" autocomplete="off" required>
            <div id="dropof-suggestions" class="suggestion-list"></div>
            <button class="icon-btn" onclick="openModal('airportListModal2')"><img src="https://taxisnetwork-next.github.io/booking-form/assets/images/aeroplane.png"></button>
        </div>
        <span class="error-message" id="dropof-error">Please select a valid dropoff address.</span>
    </div>

    <div class="two-column">
        <div class="form-field">
            <label class="field-label">Wait Time (min)</label>
            <div class="field-container field-mini">
                <label class="toggle-switch"><input type="checkbox" id="wait_time_toggle" onchange="toggleWaitTime()"><span class="slider"></span></label>
                <input id="wait_time" class="wait-time-input" type="number" min="0" max="60" value="0" disabled>
            </div>
            <span class="error-message" id="wait-time-error">Must be 1â€“60 minutes when enabled.</span>
        </div>
        <div class="form-field">
            <label class="field-label">DateTime</label>
            <div class="field-container"><input id="book_pick_datetime" class="custom-datetime" type="datetime-local" required></div>
            <span class="error-message" id="datetime-error">At least 15 minutes from now.</span>
        </div>
    </div>

    <div class="two-column">
        <div class="form-field">
            <label class="field-label">Passenger</label>
            <div class="field-container field-mini">
                <button class="icon-btn"><img src="https://taxisnetwork-next.github.io/booking-form/assets/images/people.webp"></button>
                <input id="Passenger" class="custom-input" type="number" min="1" max="200" placeholder="Add passenger">
            </div>
            <span class="error-message" id="passenger-error">At least 1 passenger.</span>
        </div>
        <div class="form-field">
            <label class="field-label">Items</label>
            <div class="field-container field-mini">
                <button class="icon-btn" onclick="openModal('moreModalitem')"><img src="https://taxisnetwork-next.github.io/booking-form/assets/images/luggage-form.webp"></button>
                <input id="items-input" class="custom-input" placeholder="No Items" readonly>
            </div>
        </div>
    </div>

    <div id="items-side-menu" class="items-side-menu">
        <div class="items-side-menu-header">
            <h2 class="items-side-menu-title">Selected Items</h2>
            <button class="close-btn" onclick="toggleItemsSideMenu()">Close</button>
        </div>
        <div id="items-side-menu-body" class="items-side-menu-body"></div>
        <div class="items-side-menu-footer">
            <button class="custom-btn" onclick="clearAllItems()">Clear All</button>
        </div>
    </div>

    <button class="submit-btn" onclick="submitForm()">Get Quotes</button>
</div>

<div id="airportListModal1" class="modal"><div class="modal-content"><div class="modal-header"><h2 class="modal-title">Airports</h2><button class="close-btn" onclick="closeModal('airportListModal1')"><img src="https://taxisnetwork-next.github.io/booking-form/assets/images/close.png"></button></div><div class="modal-body"><div class="airport-list">
        <button class="airport-btn" data-value="LONDON HEATHROW AIRPORT TERMINAL 1 | TW6 1AP">HEATHROW TERMINAL 1</button>
        <button class="airport-btn" data-value="LONDON HEATHROW AIRPORT TERMINAL 2 | TW6 1EW">HEATHROW TERMINAL 2</button>
        <button class="airport-btn" data-value="LONDON HEATHROW AIRPORT TERMINAL 3 | TW6 1QG">HEATHROW TERMINAL 3</button>
        <button class="airport-btn" data-value="LONDON HEATHROW AIRPORT TERMINAL 4 | TW6 3XA">HEATHROW TERMINAL 4</button>
        <button class="airport-btn" data-value="LONDON HEATHROW AIRPORT TERMINAL 5 | TW6 2GA">HEATHROW TERMINAL 5</button>
        <button class="airport-btn" data-value="LONDON GATWICK AIRPORT NORTH TERMINAL | RH6 0PJ">GATWICK NORTH TERMINAL</button>
        <button class="airport-btn" data-value="LONDON GATWICK AIRPORT SOUTH TERMINAL | RH6 0NP">GATWICK SOUTH TERMINAL</button>
        <button class="airport-btn" data-value="LONDON CITY AIRPORT | E16 2PX">LONDON CITY</button>
        <button class="airport-btn" data-value="LONDON STANSTED AIRPORT | CM24 1RW">STANSTED</button>
        <button class="airport-btn" data-value="LONDON LUTON AIRPORT | LU2 9QT">LUTON</button>
    </div></div><div class="modal-footer"><button class="custom-btn" onclick="closeModal('airportListModal1')">Close</button></div></div></div>

    <div id="airportListModal2" class="modal"><div class="modal-content"><div class="modal-header"><h2 class="modal-title">Airports</h2><button class="close-btn" onclick="closeModal('airportListModal2')"><img src="https://taxisnetwork-next.github.io/booking-form/assets/images/close.png"></button></div><div class="modal-body"><div class="airport-list">
        <!-- same buttons as above -->
        <button class="airport-btn" data-value="LONDON HEATHROW AIRPORT TERMINAL 1 | TW6 1AP">HEATHROW TERMINAL 1</button><button class="airport-btn" data-value="LONDON HEATHROW AIRPORT TERMINAL 2 | TW6 1EW">HEATHROW TERMINAL 2</button><button class="airport-btn" data-value="LONDON HEATHROW AIRPORT TERMINAL 3 | TW6 1QG">HEATHROW TERMINAL 3</button><button class="airport-btn" data-value="LONDON HEATHROW AIRPORT TERMINAL 4 | TW6 3XA">HEATHROW TERMINAL 4</button><button class="airport-btn" data-value="LONDON HEATHROW AIRPORT TERMINAL 5 | TW6 2GA">HEATHROW TERMINAL 5</button><button class="airport-btn" data-value="LONDON GATWICK AIRPORT NORTH TERMINAL | RH6 0PJ">GATWICK NORTH TERMINAL</button><button class="airport-btn" data-value="LONDON GATWICK AIRPORT SOUTH TERMINAL | RH6 0NP">GATWICK SOUTH TERMINAL</button><button class="airport-btn" data-value="LONDON CITY AIRPORT | E16 2PX">LONDON CITY</button><button class="airport-btn" data-value="LONDON STANSTED AIRPORT | CM24 1RW">STANSTED</button><button class="airport-btn" data-value="LONDON LUTON AIRPORT | LU2 9QT">LUTON</button>
    </div></div><div class="modal-footer"><button class="custom-btn" onclick="closeModal('airportListModal2')">Close</button></div></div></div>

    <div id="moreModalitem" class="modal"><div class="modal-content"><div class="modal-header"><h2 class="modal-title">Select More Items</h2><button class="close-btn" onclick="closeModal('moreModalitem')"><img src="https://taxisnetwork-next.github.io/booking-form/assets/images/close.png"></button></div><div class="modal-body"><div id="accordionExample"></div><div class="loader" id="sploader" style="display:none;"></div></div><div class="modal-footer"><button class="custom-btn" onclick="closeModal('moreModalitem')">Close</button></div></div></div>

    <div id="itemcount" class="modal"><div class="modal-content"><div class="modal-header"><h2 class="modal-title">Enter Quantity</h2><button class="close-btn" onclick="closeModal('itemcount')"><img src="https://taxisnetwork-next.github.io/booking-form/assets/images/close.png"></button></div><div class="modal-body"><input type="hidden" id="nameid"><input type="number" max="99" min="1" value="1" class="custom-input" id="numbermoreitm"></div><div class="modal-footer"><button class="custom-btn" onclick="addItem()">Save</button></div></div></div>

    <div class="loading-div"><div class="loader"></div></div>`;

        const script = document.createElement('script');
        script.textContent = `
            const API_BASE = "${API_BASE}";
            const OFFICE_DETAILS = "${OFFICE_DETAILS}";
            const COLOR_CODE = "${COLOR_CODE}";
            let accuserdb = "";
            let originalFields = [];
            let validAddresses = [];

            function openModal(e){let t=document.getElementById(e);t.classList.add("show");t.style.display="flex"}
            function closeModal(e){let t=document.getElementById(e);t.classList.remove("show");setTimeout(()=>{t.style.display="none";if(e==="moreModalitem")document.querySelectorAll(".collapse.show").forEach(e=>e.classList.remove("show"));resetErrors()},100)}
            function resetErrors(){document.querySelectorAll(".error-message").forEach(e=>e.style.display="none")}
            function setDefaultDateTime(){const e=new Date,t=new Date(e.getTime()+900000),o=t.getFullYear(),a=(t.getMonth()+1).toString().padStart(2,"0"),d=t.getDate().toString().padStart(2,"0"),n=t.getHours().toString().padStart(2,"0"),i=t.getMinutes().toString().padStart(2,"0");document.getElementById("book_pick_datetime").value=\`\${o}-\${a}-\${d}T\${n}:\${i}\`}
            function validateDateTime(){const e=new Date(document.getElementById("book_pick_datetime").value),t=new Date;t.setMinutes(t.getMinutes()+15);return e>t}
            function toggleWaitTime(){const e=document.getElementById("wait_time_toggle").checked,t=document.getElementById("wait_time");e?(t.disabled=!1,t.value=1):(t.disabled=!0,t.value=0)}
            setDefaultDateTime();document.getElementById("book_pick_datetime").addEventListener("change",()=>{validateDateTime()||document.getElementById("datetime-error").style.display="block"});
            const debounce=e=>t=>{clearTimeout(window.debounceTimer);window.debounceTimer=setTimeout(()=>e(t),300)};
            const fetchSuggestions=async(e,t,o=!1)=>{const a=document.getElementById(t);if(e.length<(o?1:3))return void(a.style.display="none");try{const o=await fetch(\`\${API_BASE}/Home/Indextwo?Prefix=\${encodeURIComponent(e)}\`),d=await o.json();if(!d.list)return void(a.style.display="none");const n=d.list.map(e=>e.address);a.innerHTML=n.map(e=>'<div class="suggestion-item">'+e+'</div>').join("");a.style.display=n.length?"block":"none";return n}catch(e){a.style.display="none";return[]}};
            const setupAutocomplete=(e,t)=>{const o=document.getElementById(e),a=document.getElementById(t),d=debounce(fetchSuggestions);o.addEventListener("input",async()=>{await d(o.value,t,e.includes("via"))});o.addEventListener("blur",()=>{setTimeout(()=>{a.style.display="none"},200)});a.addEventListener("click",e=>{if(e.target.classList.contains("suggestion-item")){o.value=e.target.textContent;a.style.display="none";validAddresses=[...new Set([...validAddresses,o.value])];document.getElementById(e+"-error")?.style.display="none"}})};
            setupAutocomplete("pickup","pickup-suggestions");setupAutocomplete("dropof","dropof-suggestions");
            document.querySelectorAll(".airport-btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".modal").id.includes("1")?"pickup":"dropof";document.getElementById(t).value=e.dataset.value;validAddresses=[...new Set([...validAddresses,e.dataset.value])];closeModal(e.closest(".modal").id)})});
            async function loadItems(){document.getElementById("sploader").style.display="block";const e=await fetch("https://stationcarslondon.com/api/ItemsAPI/GetItems"),t=await e.json(),o=document.getElementById("accordionExample");t.data.forEach((e,t)=>{o.innerHTML+='<div class="card"><div class="card-header"><button class="custom-btn collapsed" onclick="this.nextElementSibling.classList.toggle(\'show\')">'+e.itemname+'</button></div><div class="collapse card-body">'+e.itemsubchild.map(e=>'<button class="custom-btn luggage-item" onclick="selectItem(this)" luggagetype="'+e.type+'">'+e.name+'</button>').join("")+'</div></div>'});document.getElementById("sploader").style.display="none"}
            function selectItem(e){document.getElementById("nameid").value=e.textContent;document.getElementById("numbermoreitm").value=1;closeModal("moreModalitem");openModal("itemcount")}
            function addItem(){const e=document.getElementById("nameid").value.trim(),t=document.getElementById("numbermoreitm").value,o=\`\${t} \${e}\`;accuserdb=accuserdb?accuserdb+","+o:o;updateItemsInput();renderItemsSideMenu();closeModal("itemcount")}
            function updateItemsInput(){const e=accuserdb?accuserdb.split(",").filter(e=>e.trim()):[];document.getElementById("items-input").value=e.length?\`\${e.length} Item\${e.length>1?"s":""} - press to edit\`:"No Items"}
            function toggleItemsSideMenu(){const e=document.getElementById("items-side-menu");if(accuserdb){e.style.display="flex";setTimeout(()=>{e.classList.add("show");renderItemsSideMenu()},50)}else document.getElementById("items-error")?.style.display="block"}
            function renderItemsSideMenu(){const e=document.getElementById("items-side-menu-body"),t=accuserdb.split(",").filter(e=>e.trim());e.innerHTML=t.map((e,o)=>{\`<div class="items-side-menu-item"><span>\${e}</span><button class="delete-btn" onclick="accuserdb=accuserdb.split(',').filter((_,i)=>i!==\${o}).join(',');updateItemsInput();renderItemsSideMenu()"><img src="https://taxisnetwork-next.github.io/booking-form/assets/images/delete.jpg"></button></div>\`).join("")||"<div>No items selected.</div>"}
            function clearAllItems(){accuserdb="";updateItemsInput();renderItemsSideMenu()}
            document.getElementById("items-input").addEventListener("click",toggleItemsSideMenu);
            document.addEventListener("click",e=>{if(document.getElementById("items-side-menu").classList.contains("show")&&!document.getElementById("items-side-menu").contains(e.target)&&!document.getElementById("items-input").contains(e.target))toggleItemsSideMenu()});

            async function submitForm(){
                resetErrors();
                const pickup=document.getElementById("pickup").value.trim();
                const dropoff=document.getElementById("dropof").value.trim();
                const datetime=document.getElementById("book_pick_datetime").value;
                const passengers=parseInt(document.getElementById("Passenger").value)||0;
                const waitTime=parseInt(document.getElementById("wait_time").value)||0;
                const toggle=document.getElementById("wait_time_toggle").checked;
                const tripFlag=toggle&&waitTime>0?"WR":"single";
                const vias=originalFields.map(e=>e.trim()).filter(e=>e).join("@");
                if(!pickup||!dropoff||!datetime||!validateDateTime()||passengers<1){alert("Please fill all required fields correctly");return}
                const luggageText=accuserdb?accuserdb.split(",").map(e=>e.trim().split(" ").reverse().join("@")).join(","):"";
                const url=\`https://booking.londontaxis247.co.uk/OurVehicle/OurVehicle?luggage_text=\${encodeURIComponent(luggageText)}&pickup=\${encodeURIComponent(pickup)}&dropoff=\${encodeURIComponent(dropoff)}&office_details=\${encodeURIComponent(OFFICE_DETAILS)}&listviasaddress=\${encodeURIComponent(vias)}&tripFlag=\${tripFlag}&mints=\${waitTime}&colorCode=\${COLOR_CODE}\`;
                document.querySelector(".loading-div").style.display="flex";
                window.location.href=url;
            }
            loadItems();
        `;
        widget.appendChild(script);
    });
})();
</script>

</body>
</html>
